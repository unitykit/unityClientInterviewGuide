# ç®€æ˜“æ‰“åŒ…æµç¨‹

### é¢è¯•é¢˜

1. å¦‚ä½•è·¨å¹³å°æ‰“åŒ… AssetBundle?

ä»¥ä¸‹æ˜¯Unity AssetBundleåœ¨Android/iOS/PCä¸‰å¤§å¹³å°çš„æ‰“åŒ…æµç¨‹è¯´æ˜

å¯è§†åŒ–æ‰“åŒ…ä¸ä¾èµ–åˆ†æ

**AssetBundle Browser**ï¼š https://github.com/Unity-Technologies/AssetBundles-Browser 

| **é¡¹ç›®**     | **Android**         | **iOS**                         | **PC**            |
| ------------ | ------------------- | ------------------------------- | ----------------- |
| **å‹ç¼©æ ¼å¼** | LZ4ï¼ˆæ¨èï¼‰         | LZ4ï¼ˆé¿å…å¡é¡¿ï¼‰                 | LZMA/Noneï¼ˆè°ƒè¯•ï¼‰ |
| **è·¯å¾„å‰ç¼€** | `jar:file://`       | `Application.dataPath + "/Raw"` | ç›´æ¥è·¯å¾„          |
| **å˜ä½“æ”¯æŒ** | åˆ†è¾¨ç‡é€‚é…ï¼ˆhd/sdï¼‰ | åŒAndroid                       | é€šå¸¸ä¸éœ€è¦        |
| **æƒé™è¦æ±‚** | éœ€ç½‘ç»œ/å­˜å‚¨æƒé™     | éœ€ATSé…ç½®                       | æ— ç‰¹æ®Šè¦æ±‚        |

![img](assets/1754384972158-bbbcac4d-f951-44e1-86cc-f209109542af.png)

![img](assets/1754387399457-821861bb-305a-4bc5-837e-abc7ff92eb02.png)

### ğŸ“±**Androidå¹³å°æ‰“åŒ…æµç¨‹**

#### **èµ„æºæ ‡è®°ä¸åˆ†ç»„**

**è®¾ç½®ABåŒ…å**

- åœ¨Projectè§†å›¾é€‰ä¸­èµ„æºï¼ˆå¦‚Prefabã€è´´å›¾ï¼‰â†’ Inspectoråº•éƒ¨è®¾ç½®AssetBundleåç§°ï¼ˆ**å¿…é¡»å°å†™å­—æ¯**ï¼‰
- **ä¾èµ–å¤„ç†**ï¼šå…±ç”¨èµ„æºï¼ˆå¦‚æè´¨ï¼‰å•ç‹¬æ‰“åŒ…ä¸º`shared`åŒ…ï¼Œé¿å…é‡å¤ã€‚

#### **é…ç½®æ‰“åŒ…å‚æ•°**

- **å·¥å…·**ï¼šä½¿ç”¨Unityå®˜æ–¹æ’ä»¶`AssetBundle Browser`ï¼ˆéœ€ä»GitHubå¯¼å…¥ï¼‰ã€‚
- **å…³é”®è®¾ç½®**

```csharp
Build Target â†’ Android  
Compression â†’ LZ4ï¼ˆå¹³è¡¡åŠ è½½é€Ÿåº¦ä¸åŒ…ä½“å¤§å°ï¼‰  
Output Path â†’ è‡ªå®šä¹‰ç›®å½•ï¼ˆå¦‚`Assets/StreamingAssets`ï¼‰
```

#### **æ‰“åŒ…**

- ç‚¹å‡»`Build`æŒ‰é’® â†’ ç”Ÿæˆ`.unity3d`æ–‡ä»¶åŠ`.manifest`ä¾èµ–æ–‡ä»¶ã€‚

### ğŸ **iOSå¹³å°æ‰“åŒ…æµç¨‹**

#### **èµ„æºæ ‡è®°**

- ä¸Androidç±»ä¼¼ï¼Œä½†éœ€æ³¨æ„ï¼š 

- **å‘½åè§„åˆ™**ï¼šABåŒ…åé¿å…ç‰¹æ®Šå­—ç¬¦ï¼ˆiOSæ–‡ä»¶ç³»ç»Ÿæ•æ„Ÿï¼‰ã€‚
- **å˜ä½“æ”¯æŒ**ï¼šé€šè¿‡`hd`/`sd`åç¼€é€‚é…ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡ã€‚

#### **å…³é”®é…ç½®**

- **å‹ç¼©æ ¼å¼**ï¼šä¼˜å…ˆé€‰æ‹©`ChunkBasedCompression`ï¼ˆLZ4ï¼‰é¿å…è§£å‹å¡é¡¿ã€‚
- **è·¯å¾„å¤„ç†**ï¼š 

```csharp
// iOSåŠ è½½è·¯å¾„ç¤ºä¾‹
string path = Application.dataPath + "/Raw/" + abName;
```

#### **æ‰“åŒ…è¾“å‡º**

- ä½¿ç”¨ç›¸åŒæ’ä»¶ï¼Œé€‰æ‹©`Build Target â†’ iOS` â†’ ç”ŸæˆABåŒ…ã€‚
- **ATSé™åˆ¶**ï¼šè‹¥ä»æœåŠ¡å™¨ä¸‹è½½ABåŒ…ï¼Œéœ€åœ¨`Info.plist`ä¸­ç¦ç”¨ATSæˆ–å¯ç”¨HTTPSã€‚

### ğŸ’» **PCå¹³å°æ‰“åŒ…æµç¨‹**

#### **èµ„æºå‡†å¤‡**

- **è·¯å¾„è§„èŒƒ**ï¼šç¡®ä¿èµ„æºè·¯å¾„ä½¿ç”¨`/`è€Œé`\`ï¼ˆWindowséœ€è½¬ä¹‰ï¼‰ã€‚
- **è°ƒè¯•ä¼˜åŒ–**ï¼šå¼€å‘æœŸå¯é€‰æ‹©`UncompressedAssetBundle`åŠ é€Ÿè¿­ä»£ã€‚

#### **æ‰“åŒ…é…ç½®**

```csharp
Build Target â†’ StandaloneWindows/StandaloneLinux  
Compression â†’ Noneï¼ˆå¿«é€Ÿè°ƒè¯•ï¼‰æˆ– LZMAï¼ˆå‘å¸ƒåŒ…ï¼‰
```

#### **è¾“å‡ºæ–‡ä»¶**

- ç”ŸæˆABåŒ…åï¼Œç›´æ¥é€šè¿‡æœ¬åœ°è·¯å¾„åŠ è½½ï¼š 

```csharp
AssetBundle.LoadFromFile("C:/Path/to/bundle.unity3d");
```

### ğŸ”„**é€šç”¨æµç¨‹**

#### **1. ä¾èµ–ç®¡ç†**

- **åŠ è½½é¡ºåº**ï¼šé€šè¿‡`AssetBundleManifest`è·å–ä¾èµ–åˆ—è¡¨ï¼Œå…ˆåŠ è½½ä¾èµ–åŒ…å†åŠ è½½ä¸»åŒ…ã€‚ 

```js
AssetBundle manifestBundle = AssetBundle.LoadFromFile("AssetBundles/AssetBundles");
AssetBundleManifest manifest = manifestBundle.LoadAsset<AssetBundleManifest>("AssetBundleManifest");
string[] deps = manifest.GetAllDependencies("main.ab");
```

#### **2. çƒ­æ›´æ–°ç­–ç•¥**

- **ç‰ˆæœ¬æ§åˆ¶**ï¼šæœåŠ¡å™¨ç»´æŠ¤å„å¹³å°çš„ç‰ˆæœ¬æ¸…å•ï¼ˆå¦‚`version_android.txt`ï¼‰ï¼Œæ¯”å¯¹å“ˆå¸Œå€¼å†³å®šæ˜¯å¦æ›´æ–°ã€‚
- **å¢é‡æ›´æ–°**ï¼šä»…ä¸‹è½½å·®å¼‚åŒ…ï¼Œå‡å°‘æµé‡æ¶ˆè€—ã€‚
